DROP TABLE IF EXISTS USERS;
DROP TABLE IF EXISTS MOVES;

CREATE TABLE USERS(
    ID INT AUTO_INCREMENT,
    USER VARCHAR(30) NOT NULL,
    PASSWORD VARCHAR(64) NOT NULL,
    LEVEL INT NOT NULL,
    SALDO INT,
    PRIMARY KEY(ID)
); 

CREATE TABLE MOVES(
    ID_TRANS INT AUTO_INCREMENT,
    USER_ID VARCHAR(30) NOT NULL,
    CANTIDAD INT NOT NULL,
    FECHA DATE NOT NULL,
    MESSAGE VARCHAR(100) NOT NULL,
    PRIMARY KEY(ID_TRANS)
); 


INSERT INTO USERS (USER,PASSWORD,LEVEL) VALUES("XCTFV", SHA1("PASSWORD"), 1);
INSERT INTO USERS (USER,PASSWORD,LEVEL) VALUES("LUISMI", SHA1("LUISMI"), 2);
INSERT INTO USERS (USER,PASSWORD,LEVEL,SALDO) VALUES("PRUEBA", SHA1("SIMACHO"), 3,2700);

INSERT INTO MOVES (USER_ID,CANTIDAD,FECHA,MESSAGE) VALUES("3","-300",DATE(NOW()),"PRIMERA SACADA");





#TRANSACCIONES
UPDATE USERS SET SALDO=SALDO-300 WHERE ID = 3;
INSERT INTO MOVES (USER_ID,CANTIDAD,FECHA,MESSAGE) VALUES("3",-300,DATE(NOW()),"PRIMERA SACADA");